(t=>{t.cmmv={socket:null,contractIndex:{},contracts:{},initialize(){this.socket=new WebSocket(window.location.href.replace("https","wss").replace("http","ws")),this.socket.addEventListener("message",this.parseMessage),this.socket.binaryType="arraybuffer"},addContracts:function(t){try{for(var n in this.contractIndex=t.index,t.contracts){var e;t.contracts.hasOwnProperty(n)&&(e=protobuf.Root.fromJSON(t.contracts[n]),this.contracts[n]=e)}console.log("Loaded contracts:",this.contracts)}catch(t){console.error("Error loading contracts:",t)}},getContract:function(t){return this.contracts[t]},parseMessage(t){},pack(t,n,e){var o,r,s;return this.contracts.has(t)&&this.index.has(t)?(r=(o=this.index.get(t))?.types[n.replace(t+".","")],s=(s=this.contracts.get(t)?.lookupType(n))&&e?s.encode(e).finish():null,(e=(this.contracts.get("ws")?.lookupType("ws.Call"))?.encode({contract:o?.index,message:r,data:s&&s instanceof Uint8Array?s:new Uint8Array}).finish())?new Uint8Array(e):null):(console.error(`Not found in contract list ${t}.`+n),null)},rpc:{}},t.cmmv.initialize()})("undefined"!=typeof window?window:global);